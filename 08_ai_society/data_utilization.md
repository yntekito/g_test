# データ活用・分析プロセス

## 要点
- **CRISP-DM**はデータマイニングの標準的なプロセスモデルで、**6つの段階**で構成される
- 6段階：①ビジネス理解、②データ理解、③データ準備、④モデリング、⑤評価、⑥デプロイ（展開）
- **含まれないもの**：システム保守・運用、データ収集インフラ構築、法的承認等（これらは別プロセス）

## 定義
CRISP-DM（Cross Industry Standard Process for Data Mining）は、データマイニング・データサイエンスプロジェクトの標準的なプロセスモデル。1990年代後半に業界横断的に策定され、現在も広く使用されている。6つの段階を反復的に実行し、ビジネス目標からモデル展開まで体系的に進める。

---

## CRISP-DMの6つの段階★試験頻出

### 全体フロー

```
   ①ビジネス理解
        ↓
   ②データ理解
        ↓
   ③データ準備
        ↓
   ④モデリング ←→ ③データ準備（反復）
        ↓
   ⑤評価 ←→ ②データ理解（必要に応じて戻る）
        ↓
   ⑥デプロイ（展開）
        ↓
   ①ビジネス理解（次のサイクル）
```

**特徴**:
- **反復的（Iterative）**: 各段階を行き来しながら改善
- **非線形**: 必要に応じて前の段階に戻る
- **業界横断**: 製造、金融、医療等あらゆる業界で適用可能

---

### ①ビジネス理解（Business Understanding）★最初の段階

**目的**: プロジェクトの目標と要件をビジネス視点で明確化

**主な活動**:
- ビジネス目標の決定
- 現状評価（リソース、制約、リスク）
- データマイニングの目標設定
- プロジェクト計画の策定

**成果物**:
- ビジネス目標の文書化
- データマイニング目標の定義
- プロジェクト計画書

**具体例**:
```
ビジネス目標: 「顧客解約率を20%削減する」
↓
データマイニング目標: 「解約リスクの高い顧客を特定する予測モデルを構築」
↓
成功基準: 「予測精度80%以上、解約予測の3ヶ月前に検知」
```

**重要ポイント**:
- データ分析の前に、**なぜやるのか**（ビジネス価値）を明確化
- 技術者とビジネス部門の共通理解を形成

---

### ②データ理解（Data Understanding）

**目的**: 利用可能なデータを収集し、特性を把握

**主な活動**:
- 初期データの収集
- データの記述（データ量、属性、型等）
- データの探索（統計量、可視化）
- データ品質の検証（欠損値、外れ値、不整合）

**成果物**:
- データ収集レポート
- データ探索レポート
- データ品質レポート

**具体例**:
```
顧客データベース:
- 100万件の顧客レコード
- 属性: 年齢、性別、購買履歴、契約期間等
- 問題: 年齢の10%が欠損、購買履歴に異常値あり
```

**重要ポイント**:
- データの**量と質**を把握
- モデリングの前に、データの限界を認識

---

### ③データ準備（Data Preparation）★最も時間がかかる

**目的**: モデリングに適したデータセットを構築

**主な活動**:
- データ選択（必要な属性・レコードの選定）
- データクリーニング（欠損値処理、外れ値除去）
- データ統合（複数ソースの結合）
- 特徴量エンジニアリング（新しい変数の生成）
- データフォーマット変換（正規化、標準化等）

**成果物**:
- 最終データセット
- データ変換の記録

**具体例**:
```
処理前: 100万件、50属性
↓
欠損値処理: 年齢の欠損を中央値で補完
外れ値除去: 購買金額が100万円超のレコードを除外
特徴量生成: 「月平均購買額」「契約継続月数」等を計算
↓
処理後: 95万件、65属性（特徴量追加）
```

**重要ポイント**:
- データサイエンスの**80%の時間**がここに費やされる
- モデリングと行き来しながら最適化

---

### ④モデリング（Modeling）

**目的**: 分析技術を選択し、モデルを構築・調整

**主な活動**:
- モデリング手法の選択（線形回帰、決定木、NN等）
- テスト設計（訓練・テストデータ分割）
- モデルの構築（パラメータ調整）
- モデルの評価（精度、再現率等）

**成果物**:
- 構築されたモデル
- モデルの説明文書
- パラメータ設定の記録

**具体例**:
```
手法選択: ランダムフォレスト、XGBoost、ロジスティック回帰
↓
訓練・テスト分割: 80% / 20%
↓
パラメータ調整: グリッドサーチでハイパーパラメータ最適化
↓
最終モデル: XGBoost（精度85%）
```

**重要ポイント**:
- 複数のアルゴリズムを試して比較
- データ準備に戻って特徴量を追加することも多い

---

### ⑤評価（Evaluation）

**目的**: モデルがビジネス目標を達成できるか評価

**主な活動**:
- モデル結果の評価（精度だけでなくビジネス観点）
- プロセスのレビュー（手順の妥当性確認）
- 次のステップの決定（デプロイか、やり直すか）

**成果物**:
- 評価結果レポート
- デプロイ判断の根拠

**具体例**:
```
技術的評価:
- 予測精度: 85%（目標80%を達成）
- 再現率: 78%
- F1スコア: 81%

ビジネス的評価:
- 解約予測: 3ヶ月前に70%を検知可能
- コスト削減見込み: 年間5000万円
- 判断: デプロイ可能
```

**重要ポイント**:
- 技術的精度だけでなく、**ビジネス価値**で評価
- ビジネス目標（①）に立ち返って判断

---

### ⑥デプロイ（Deployment / 展開）★最終段階

**目的**: モデルを実運用環境に展開し、活用可能にする

**主な活動**:
- デプロイ計画の策定
- モデルの実装（API化、システム組み込み等）
- 監視・保守計画の策定
- 最終レポート作成
- プロジェクトレビュー

**成果物**:
- デプロイされたモデル
- 運用マニュアル
- 最終プロジェクトレポート

**具体例**:
```
デプロイ方法:
- 予測APIをWebサービスとして公開
- 毎日顧客データを自動取得し解約リスクを計算
- リスクスコアをCRMシステムに送信
- 営業部門がリスク顧客にアプローチ

監視:
- モデル精度の定期チェック（月次）
- データドリフトの検出
- 必要に応じてモデル再学習
```

**重要ポイント**:
- デプロイ後も**継続的な監視**が必要
- ビジネス環境の変化に応じて①に戻り、新サイクル開始

---

## CRISP-DMに含まれないもの（ひっかけ注意）★試験頻出

### ❌ 含まれない項目

| 項目 | 含まれない理由 | 該当するプロセス |
|------|---------------|-----------------|
| **データ収集インフラ構築** | CRISP-DMは既存データの活用が前提 | データエンジニアリング |
| **システム保守・運用** | デプロイ後の継続的な運用は別プロセス | MLOps |
| **法的承認・契約** | ビジネスプロセスの一部 | プロジェクト管理 |
| **ハードウェア調達** | IT基盤整備 | インフラ管理 |
| **セキュリティ対策** | 情報セキュリティプロセス | セキュリティ管理 |
| **データ削除・廃棄** | データライフサイクル管理 | ガバナンス |

### よく混同される項目

**「データ収集」vs「データ理解」**:
- **データ理解（②）**: 既に存在するデータを収集・把握する段階
- **データ収集インフラ構築**: センサー設置、DB設計等（CRISP-DM外）

**「デプロイ（⑥）」vs「保守運用」**:
- **デプロイ（⑥）**: モデルを実環境に展開する段階まで
- **保守運用**: デプロイ後の継続的な監視・再学習（CRISP-DM外、MLOpsの領域）

**「ビジネス理解（①）」vs「法的承認」**:
- **ビジネス理解（①）**: プロジェクトの目標・計画を策定
- **法的承認**: 契約締結、コンプライアンス承認（ビジネスプロセスの一部、CRISP-DM外）

---

## 重要キーワード

- **CRISP-DM**: データマイニングの標準プロセスモデル、6段階で構成
- **ビジネス理解（Business Understanding）**: プロジェクトの目標を明確化（第1段階）
- **データ理解（Data Understanding）**: データの収集と特性把握（第2段階）
- **データ準備（Data Preparation）**: モデリング用データセットの構築（第3段階）
- **モデリング（Modeling）**: 分析手法選択とモデル構築（第4段階）
- **評価（Evaluation）**: ビジネス観点でモデルを評価（第5段階）
- **デプロイ（Deployment）**: モデルを実運用環境に展開（第6段階）
- **反復的プロセス**: 各段階を行き来しながら改善
- **業界横断標準**: あらゆる業界で適用可能

---

## 試験での問われ方

### 典型的な出題パターン

1. **6段階の確認**: 「CRISP-DMの6つの段階に含まれるものは？」
   → ✅ ビジネス理解、データ理解、データ準備、モデリング、評価、デプロイ

2. **含まれないものを選択**: 「CRISP-DMに含まれないものは？」
   → ✅ システム保守・運用、データ収集インフラ構築、法的承認

3. **順序の確認**: 「最初の段階は？」
   → ✅ ビジネス理解

4. **各段階の説明**: 「データ準備段階で行うことは？」
   → ✅ 欠損値処理、特徴量エンジニアリング

5. **反復性の理解**: 「モデリング後に戻る段階は？」
   → ✅ データ準備（特徴量追加のため）

### ひっかけポイント

**含まれない項目を含まれると誤解**:
- ❌ 「データ収集システムの構築」→ CRISP-DM外
- ❌ 「運用後の定期保守」→ MLOpsの領域
- ❌ 「セキュリティポリシー策定」→ ガバナンスの領域
- ❌ 「法的リスク評価」→ ビジネスプロセスの一部

**順序の誤解**:
- ❌ 「データ理解→ビジネス理解」→ 逆、ビジネス理解が最初
- ❌ 「モデリング→評価→データ準備」→ データ準備はモデリングの前

**用語の混同**:
- **データ理解** vs **データ準備**: 理解=把握、準備=加工
- **評価** vs **デプロイ**: 評価=判断、デプロイ=実装
- **ビジネス理解** vs **評価**: 理解=目標設定、評価=目標達成確認

### 選択肢で出やすいパターン

**✅ 正解（含まれる）**:
- 「ビジネス目標の明確化」（①ビジネス理解）
- 「データの探索と品質確認」（②データ理解）
- 「欠損値処理と特徴量エンジニアリング」（③データ準備）
- 「予測モデルの構築」（④モデリング）
- 「モデルのビジネス的評価」（⑤評価）
- 「モデルの実運用環境への展開」（⑥デプロイ）

**❌ 誤答（含まれない）**:
- 「データ収集インフラの設計・構築」
- 「システムの継続的な保守・運用」
- 「法的承認プロセスの実施」
- 「ハードウェアの調達・設置」
- 「長期的なシステム監視」
- 「データの完全削除・廃棄」

---

## 補足

### 実務的観点

**CRISP-DMの現代的活用**:
- **MLOps**: デプロイ後の継続的なモデル管理を補完
- **アジャイル開発**: CRISP-DMのサイクルを短く反復
- **ビジネス・データ・AI戦略**: ビジネス理解段階でDX全体を考慮

**所要時間の目安**:
```
①ビジネス理解: 10%
②データ理解: 15%
③データ準備: 40%（最も時間がかかる）
④モデリング: 20%
⑤評価: 10%
⑥デプロイ: 5%
```

**成功の鍵**:
- ビジネス部門と技術部門の**継続的なコミュニケーション**
- **反復的な改善**（最初から完璧を目指さない）
- **ビジネス価値の明確化**（技術だけに偏らない）

### 関連するフレームワーク

- **KDD（Knowledge Discovery in Databases）**: CRISP-DMの前身
- **SEMMA（SAS）**: Sample, Explore, Modify, Model, Assess
- **TDSP（Team Data Science Process）**: Microsoftのプロセス
- **MLOps**: モデルのライフサイクル管理（デプロイ後を重視）

### 関連トピック

- [DX・AI活用](dx_and_ai.md) - ビジネス変革との関連
- [AI倫理原則](../09_law_ethics/ai_ethics_principles.md) - 開発プロセスでの倫理考慮
- [機械学習評価指標](../05_machine_learning/evaluation_metrics.md) - 評価段階で使用
- [特徴量エンジニアリング](../05_machine_learning/feature_engineering.md) - データ準備段階の詳細
